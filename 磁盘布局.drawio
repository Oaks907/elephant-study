<mxfile host="drawio-plugin" modified="2023-10-02T07:10:17.365Z" agent="5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.102 Safari/537.36" etag="ZCLguGIoGJ7hLXHCZm1a" version="20.5.3" type="embed"><diagram id="e2RzUfAxLEOmbp0WTTl0" name="Page-1"><mxGraphModel dx="1550" dy="867" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="3" value="MBR引导扇区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="5" y="280" width="120" height="60" as="geometry"/></mxCell><mxCell id="4" value="..." style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="125" y="280" width="160" height="60" as="geometry"/></mxCell><mxCell id="5" value="OBR引导扇区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1"><mxGeometry x="285" y="280" width="120" height="60" as="geometry"/></mxCell><mxCell id="6" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1"><mxGeometry x="405" y="280" width="160" height="60" as="geometry"/></mxCell><mxCell id="7" value="OBR引导扇区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1"><mxGeometry x="565" y="280" width="120" height="60" as="geometry"/></mxCell><mxCell id="8" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1"><mxGeometry x="685" y="280" width="160" height="60" as="geometry"/></mxCell><mxCell id="10" value="EBR引导扇区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1"><mxGeometry x="925" y="280" width="120" height="60" as="geometry"/></mxCell><mxCell id="12" value="..." style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1045" y="280" width="80" height="60" as="geometry"/></mxCell><mxCell id="14" value="OBR引导扇区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1"><mxGeometry x="1125" y="280" width="120" height="60" as="geometry"/></mxCell><mxCell id="15" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1"><mxGeometry x="1245" y="280" width="160" height="60" as="geometry"/></mxCell><mxCell id="16" value="..." style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1405" y="280" width="80" height="60" as="geometry"/></mxCell><mxCell id="17" value="EBR引导扇区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1"><mxGeometry x="1485" y="280" width="120" height="60" as="geometry"/></mxCell><mxCell id="18" value="..." style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1605" y="280" width="80" height="60" as="geometry"/></mxCell><mxCell id="19" value="OBR引导扇区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1"><mxGeometry x="1685" y="280" width="120" height="60" as="geometry"/></mxCell><mxCell id="20" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1"><mxGeometry x="1805" y="280" width="160" height="60" as="geometry"/></mxCell><mxCell id="21" value="...." style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1965" y="280" width="80" height="60" as="geometry"/></mxCell><mxCell id="23" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;direction=south;" parent="1" vertex="1"><mxGeometry x="285" y="240" width="275" height="20" as="geometry"/></mxCell><mxCell id="24" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;direction=south;" parent="1" vertex="1"><mxGeometry x="565" y="240" width="285" height="20" as="geometry"/></mxCell><mxCell id="25" value="主分区1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="385" y="195" width="70" height="30" as="geometry"/></mxCell><mxCell id="26" value="主分区2" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="672.5" y="195" width="70" height="30" as="geometry"/></mxCell><mxCell id="27" value="..." style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="845" y="280" width="80" height="60" as="geometry"/></mxCell><mxCell id="28" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;direction=north;" parent="1" vertex="1"><mxGeometry x="925" y="360" width="475" height="20" as="geometry"/></mxCell><mxCell id="29" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;direction=north;" parent="1" vertex="1"><mxGeometry x="1480" y="360" width="480" height="20" as="geometry"/></mxCell><mxCell id="30" value="子扩展分区1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="1115" y="385" width="90" height="30" as="geometry"/></mxCell><mxCell id="31" value="子扩展分区2" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="1675" y="385" width="90" height="30" as="geometry"/></mxCell><mxCell id="32" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;direction=north;" parent="1" vertex="1"><mxGeometry x="922.5" y="430" width="1117.5" height="20" as="geometry"/></mxCell><mxCell id="33" value="总扩展分区" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="1441.25" y="475" width="80" height="30" as="geometry"/></mxCell><mxCell id="34" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;direction=south;" parent="1" vertex="1"><mxGeometry x="1125" y="240" width="285" height="20" as="geometry"/></mxCell><mxCell id="35" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;direction=south;" parent="1" vertex="1"><mxGeometry x="1680" y="240" width="285" height="20" as="geometry"/></mxCell><mxCell id="36" value="逻辑分区1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="1220" y="195" width="80" height="30" as="geometry"/></mxCell><mxCell id="37" value="逻辑分区2" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="1782.5" y="195" width="80" height="30" as="geometry"/></mxCell><mxCell id="38" value="&lt;h1&gt;MBR、OBR、DBR、EBR&lt;/h1&gt;&lt;p&gt;&lt;span style=&quot;font-size: 15px;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;MBR（Master Boot Record）：整个硬盘只有一个MBR，位于0盘0道1扇区.负责存储引导程序&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 15px;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;OBR（OS Boot Record）:也成为DBR(DOS Boot Record)，位于主分区和逻辑分区最开始的扇区。负责存储操作系统引导程序&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;font-size: 15px;&quot;&gt;EBR（Expand B&lt;/span&gt;&lt;span style=&quot;font-size: 15px; background-color: initial;&quot;&gt;oot Record）：位于各个扩展分区最开始的扇区，结构同MBR，为了兼容分区表&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1"><mxGeometry x="5" y="415" width="845" height="145" as="geometry"/></mxCell><mxCell id="55" value="partition 分区信息" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="1" vertex="1"><mxGeometry x="955" y="1000" width="500" height="300" as="geometry"/></mxCell><mxCell id="56" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;uint32_t start_lba;     &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;起始扇区&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="30" width="500" height="30" as="geometry"/></mxCell><mxCell id="62" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;uint32_t sec_cnt;       &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;扇区数&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="60" width="500" height="30" as="geometry"/></mxCell><mxCell id="61" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;disk* my_disk;    &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;分区所属的硬盘&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="90" width="500" height="30" as="geometry"/></mxCell><mxCell id="60" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;list_elem part_tag;   &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;用于队列中的标记&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="120" width="500" height="30" as="geometry"/></mxCell><mxCell id="59" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;char &lt;/span&gt;name[&lt;span style=&quot;color: rgb(23, 80, 235); font-size: 16px;&quot;&gt;8&lt;/span&gt;];       &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;分区名称&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="150" width="500" height="30" as="geometry"/></mxCell><mxCell id="64" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;super_block* sb;  &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;本分区的超级块&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="180" width="500" height="30" as="geometry"/></mxCell><mxCell id="63" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;bitmap block_bitmap;  &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;块位图&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="210" width="500" height="30" as="geometry"/></mxCell><mxCell id="67" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;bitmap inode_bitmap;  &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// i&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;结点位图&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="240" width="500" height="30" as="geometry"/></mxCell><mxCell id="66" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;list open_inodes;     &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;本分区打开的&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;结点队列&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="55" vertex="1"><mxGeometry y="270" width="500" height="30" as="geometry"/></mxCell><mxCell id="70" value="disk 硬盘结构信息" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="1" vertex="1"><mxGeometry x="850" y="670" width="725" height="180" as="geometry"/></mxCell><mxCell id="71" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;char &lt;/span&gt;name[&lt;span style=&quot;color: rgb(23, 80, 235); font-size: 16px;&quot;&gt;8&lt;/span&gt;];            &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;本硬盘的名称，如&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;sda&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;等&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="70" vertex="1"><mxGeometry y="30" width="725" height="30" as="geometry"/></mxCell><mxCell id="72" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;ide_channel* my_channel;    &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;此块硬盘归属于哪个&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;ide&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;通道&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="70" vertex="1"><mxGeometry y="60" width="725" height="30" as="geometry"/></mxCell><mxCell id="73" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;uint8_t dev_no;          &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;本硬盘是主&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;还是从&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="70" vertex="1"><mxGeometry y="90" width="725" height="30" as="geometry"/></mxCell><mxCell id="74" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;partition prim_parts[&lt;span style=&quot;color: rgb(23, 80, 235); font-size: 16px;&quot;&gt;4&lt;/span&gt;];    &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;主分区顶多是&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;4&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;个&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="70" vertex="1"><mxGeometry y="120" width="725" height="30" as="geometry"/></mxCell><mxCell id="75" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-size: 16px;&quot;&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 51, 179); font-size: 16px;&quot;&gt;struct &lt;/span&gt;partition logic_parts[&lt;span style=&quot;color: rgb(23, 80, 235); font-size: 16px;&quot;&gt;8&lt;/span&gt;];       &lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;逻辑分区数量无限&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;但总得有个支持的上限&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;那就支持&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;color: rgb(128, 128, 128); font-style: italic; font-size: 16px;&quot;&gt;个&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;rounded=0;fontSize=16;fontFamily=Comic Sans MS;" parent="70" vertex="1"><mxGeometry y="150" width="725" height="30" as="geometry"/></mxCell><mxCell id="81" value="disk当前设置为支持 4个主分区，8个逻辑分区" style="fontSize=12;html=1;endArrow=ERzeroToMany;endFill=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.496;exitY=1.027;exitDx=0;exitDy=0;exitPerimeter=0;fontFamily=Comic Sans MS;" parent="1" source="75" target="55" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="1210" y="860" as="sourcePoint"/><mxPoint x="800" y="890" as="targetPoint"/></mxGeometry></mxCell><mxCell id="82" value="ide_channel" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;align=center;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="1" vertex="1"><mxGeometry x="40" y="642" width="740" height="236" as="geometry"/></mxCell><mxCell id="84" value="char name[8];       // 本ata通道名称, 如ata0,也被叫做ide0. 可以参考bochs配置文件中关于硬盘的配置。" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="82" vertex="1"><mxGeometry y="26" width="740" height="30" as="geometry"/></mxCell><mxCell id="85" value="uint16_t port_base;     // 本通道的起始端口号" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="82" vertex="1"><mxGeometry y="56" width="740" height="30" as="geometry"/></mxCell><mxCell id="90" value="uint8_t irq_no;     // 本通道所用的中断号" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="82" vertex="1"><mxGeometry y="86" width="740" height="30" as="geometry"/></mxCell><mxCell id="89" value="struct lock lock;" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="82" vertex="1"><mxGeometry y="116" width="740" height="30" as="geometry"/></mxCell><mxCell id="88" value="bool expecting_intr;        // 向硬盘发完命令后等待来自硬盘的中断" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="82" vertex="1"><mxGeometry y="146" width="740" height="30" as="geometry"/></mxCell><mxCell id="87" value="struct semaphore disk_done;  // 硬盘处理完成.线程用这个信号量来阻塞自己，由硬盘完成后产生的中断将线程唤醒" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="82" vertex="1"><mxGeometry y="176" width="740" height="30" as="geometry"/></mxCell><mxCell id="86" value="struct disk devices[2];  // 一个通道上连接两个硬盘，一主一从" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="82" vertex="1"><mxGeometry y="206" width="740" height="30" as="geometry"/></mxCell><mxCell id="93" value="" style="edgeStyle=entityRelationEdgeStyle;fontSize=12;html=1;endArrow=ERzeroToMany;endFill=1;rounded=0;fontFamily=Comic Sans MS;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="89" target="73" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="700" y="1080" as="sourcePoint"/><mxPoint x="800" y="980" as="targetPoint"/></mxGeometry></mxCell><mxCell id="94" value="一对多" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Comic Sans MS;" parent="93" vertex="1" connectable="0"><mxGeometry x="-0.2557" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="95" value="inode" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;align=center;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="1" vertex="1"><mxGeometry x="1630" y="1396" width="880" height="176" as="geometry"/></mxCell><mxCell id="96" value="uint32_t i_no;    // inode编号" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="95" vertex="1"><mxGeometry y="26" width="880" height="30" as="geometry"/></mxCell><mxCell id="97" value="uint32_t i_size //当此inode是文件时,i_size是指文件大小,若此inode是目录,i_size是指该目录下所有目录项大小之和" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="95" vertex="1"><mxGeometry y="56" width="880" height="30" as="geometry"/></mxCell><mxCell id="98" value="uint32_t i_open_cnts;   // 记录此文件被打开的次数" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="95" vertex="1"><mxGeometry y="86" width="880" height="30" as="geometry"/></mxCell><mxCell id="100" value="uint32_t i_sectors[13] // i_sectors[0-11]是直接块, i_sectors[12]用来存储一级间接块指针" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="95" vertex="1"><mxGeometry y="116" width="880" height="30" as="geometry"/></mxCell><mxCell id="99" value="struct list_elem inode_tag;" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="95" vertex="1"><mxGeometry y="146" width="880" height="30" as="geometry"/></mxCell><mxCell id="125" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;" parent="1" source="101" target="59" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="101" value="super_block" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;align=center;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="1" vertex="1"><mxGeometry x="220" y="1390" width="630" height="446" as="geometry"/></mxCell><mxCell id="102" value="uint32_t magic;        // 用来标识文件系统类型,支持多文件系统的操作系统通过此标志来识别文件系统类型" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="26" width="630" height="30" as="geometry"/></mxCell><mxCell id="103" value="uint32_t sec_cnt;          // 本分区总共的扇区数" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="56" width="630" height="30" as="geometry"/></mxCell><mxCell id="113" value="uint32_t inode_cnt;        // 本分区中inode数量" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="86" width="630" height="30" as="geometry"/></mxCell><mxCell id="112" value="uint32_t part_lba_base;     // 本分区的起始lba地址" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="116" width="630" height="30" as="geometry"/></mxCell><mxCell id="111" value="uint32_t block_bitmap_lba;      // 块位图本身起始扇区地址" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="146" width="630" height="30" as="geometry"/></mxCell><mxCell id="110" value="uint32_t block_bitmap_sects;     // 扇区位图本身占用的扇区数量" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="176" width="630" height="30" as="geometry"/></mxCell><mxCell id="109" value="uint32_t inode_bitmap_lba;      // i结点位图起始扇区lba地址" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="206" width="630" height="30" as="geometry"/></mxCell><mxCell id="108" value="uint32_t inode_bitmap_sects;        // i结点位图占用的扇区数量" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="236" width="630" height="30" as="geometry"/></mxCell><mxCell id="107" value="uint32_t inode_table_lba;       // i结点表起始扇区lba地址" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="266" width="630" height="30" as="geometry"/></mxCell><mxCell id="106" value="uint32_t inode_table_sects;     // i结点表占用的扇区数量" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="296" width="630" height="30" as="geometry"/></mxCell><mxCell id="105" value="uint32_t data_start_lba;        // 数据区开始的第一个扇区号" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="326" width="630" height="30" as="geometry"/></mxCell><mxCell id="116" value="uint32_t root_inode_no;     // 根目录所在的I结点号" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="356" width="630" height="30" as="geometry"/></mxCell><mxCell id="115" value="uint32_t dir_entry_size;        // 目录项大小" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="386" width="630" height="30" as="geometry"/></mxCell><mxCell id="114" value="uint8_t  pad[460];         // 加上460字节,凑够512字节1扇区大小" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="101" vertex="1"><mxGeometry y="416" width="630" height="30" as="geometry"/></mxCell><mxCell id="117" value="dir" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;align=center;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="1" vertex="1"><mxGeometry x="1115" y="1419" width="400" height="130" as="geometry"/></mxCell><mxCell id="118" value="struct inode* inode;   " style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="117" vertex="1"><mxGeometry y="26" width="400" height="30" as="geometry"/></mxCell><mxCell id="120" value="uint8_t dir_buf[512];  // 目录的数据缓存" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="117" vertex="1"><mxGeometry y="56" width="400" height="34" as="geometry"/></mxCell><mxCell id="119" value="uint32_t dir_pos;     // 记录在目录内的偏移" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="117" vertex="1"><mxGeometry y="90" width="400" height="40" as="geometry"/></mxCell><mxCell id="149" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.596;entryY=0.995;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#FF3333;dashed=1;" parent="1" source="121" target="119" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="121" value="dir_entry" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;align=center;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="1" vertex="1"><mxGeometry x="1105" y="1706" width="495" height="116" as="geometry"/></mxCell><mxCell id="122" value="char filename[MAX_FILE_NAME_LEN];  // 普通文件或目录名称" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="121" vertex="1"><mxGeometry y="26" width="495" height="30" as="geometry"/></mxCell><mxCell id="123" value="uint32_t i_no;           // 普通文件或目录对应的inode编号" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="121" vertex="1"><mxGeometry y="56" width="495" height="30" as="geometry"/></mxCell><mxCell id="124" value="enum file_types f_type;       // 文件类型" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" parent="121" vertex="1"><mxGeometry y="86" width="495" height="30" as="geometry"/></mxCell><mxCell id="134" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;dashed=1;" parent="1" target="127" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="290" y="970" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="135" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;dashed=1;" parent="1" target="133" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="410" y="970" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="126" value="分区1" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="240" y="920" width="120" height="60" as="geometry"/></mxCell><mxCell id="127" value="操作系统引导块" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="50" y="1030" width="120" height="60" as="geometry"/></mxCell><mxCell id="141" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#FF3333;" parent="1" source="128" target="129" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="230" y="1110"/><mxPoint x="290" y="1110"/></Array></mxGeometry></mxCell><mxCell id="142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#FF3333;" parent="1" source="128" target="130" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="143" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#FF3333;" parent="1" source="128" target="131" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#FF3333;" parent="1" source="128" target="133" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="128" value="超级块" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="170" y="1030" width="120" height="60" as="geometry"/></mxCell><mxCell id="129" value="空闲块位图" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="290" y="1030" width="120" height="60" as="geometry"/></mxCell><mxCell id="130" value="inode位图" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="410" y="1030" width="120" height="60" as="geometry"/></mxCell><mxCell id="131" value="inode数组" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="530" y="1030" width="120" height="60" as="geometry"/></mxCell><mxCell id="132" value="根目录" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="650" y="1030" width="120" height="60" as="geometry"/></mxCell><mxCell id="133" value="空闲块区域" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="770" y="1030" width="120" height="60" as="geometry"/></mxCell><mxCell id="136" value="MBR" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="120" y="920" width="120" height="60" as="geometry"/></mxCell><mxCell id="137" value="分区2" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="360" y="920" width="120" height="60" as="geometry"/></mxCell><mxCell id="138" value="分区3" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=16;" parent="1" vertex="1"><mxGeometry x="480" y="920" width="120" height="60" as="geometry"/></mxCell><mxCell id="139" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.007;entryY=-0.027;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;fontSize=16;" parent="1" source="116" target="123" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="140" value="&lt;font color=&quot;#ff3333&quot;&gt;目录项 . 与 .. 以 dir_entry&amp;nbsp;&lt;br&gt;的形式存储在位置&amp;nbsp;&lt;span style=&quot;text-align: left;&quot;&gt;data_start_lba 上&lt;/span&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=16;fontFamily=Comic Sans MS;" parent="1" vertex="1"><mxGeometry x="840" y="1706" width="290" height="50" as="geometry"/></mxCell><mxCell id="146" value="被划分为数据块，由inde进行控制，块大小4k" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=16;fontFamily=Comic Sans MS;fontColor=#FF3333;" parent="1" vertex="1"><mxGeometry x="600" y="975" width="340" height="30" as="geometry"/></mxCell><mxCell id="148" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#FF3333;" parent="1" source="120" target="98" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="150" value="写入 sync_dir_entry" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=16;fontFamily=Comic Sans MS;fontColor=#FF3333;" parent="1" vertex="1"><mxGeometry x="1290" y="1615" width="180" height="30" as="geometry"/></mxCell><mxCell id="151" value="inode 存储文件时，&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;i_sectors 内容是文件分块的数据&lt;br&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;inode 存储目录时，&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;i_sectors 内容时目录项，（12 + 128）*&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=16;fontFamily=Comic Sans MS;fontColor=#FF3333;" parent="1" vertex="1"><mxGeometry x="1620" y="1305" width="460" height="50" as="geometry"/></mxCell><mxCell id="152" value="file" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;align=center;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" vertex="1" parent="1"><mxGeometry x="1160" y="1960" width="400" height="140" as="geometry"/></mxCell><mxCell id="154" value="uint32_t fd_pos;      // 记录当前文件操作的偏移地址,以0为起始,最大为文件大小-1" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" vertex="1" parent="152"><mxGeometry y="26" width="400" height="34" as="geometry"/></mxCell><mxCell id="155" value="uint32_t fd_flag;" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" vertex="1" parent="152"><mxGeometry y="60" width="400" height="40" as="geometry"/></mxCell><mxCell id="156" value="struct inode* fd_inode;" style="text;strokeColor=none;fillColor=none;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;rounded=0;fontFamily=Comic Sans MS;" vertex="1" parent="152"><mxGeometry y="100" width="400" height="40" as="geometry"/></mxCell><mxCell id="157" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.516;entryY=1.013;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="155" target="99"><mxGeometry relative="1" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>