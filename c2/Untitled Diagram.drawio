<mxfile host="app.diagrams.net" modified="2023-09-20T15:58:36.782Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36" etag="f3qRtFMYo6hX2I6zJJWf" version="21.7.5" type="github">
  <diagram name="Page-1" id="12NWxGoQr25tVnfTjV8N">
    <mxGraphModel dx="2901" dy="2326" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="1wO0rDWPHwuriIPUTUys-1" value="Interrupt Vector Tabe (中断向量表)&lt;br&gt;1KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="560" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-2" value="0x000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="135" y="620" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-3" value="BIOS Data Area（BIOS数据区）&lt;br&gt;256B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="470" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-4" value="0x400" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="135" y="530" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-5" value="0x3FF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="135" y="555" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-6" value="可用区域&lt;br&gt;30648B 约30KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="380" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-7" value="MBR被BIOS加载到此处&lt;br&gt;512B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="290" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-8" value="可用区域&lt;br&gt;622080B约608KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="200" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-9" value="EBDA（Extend BIOS Data Area）扩展BIOS数据区&lt;br&gt;1KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="110" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-10" value="用于彩色显示适配器&lt;br&gt;64KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="20" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-11" value="用于黑白显示适配器&lt;br&gt;32KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="-70" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-12" value="用于文本模式显示适配器&lt;br&gt;32KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="-160" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-13" value="显示适配器BIOS&lt;br&gt;32KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="-250" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-14" value="映射硬件适配器的ROM或内存映射式I/O&lt;br&gt;160KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="-340" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-15" value="系统BIOS范围是F0000~FFFFF共64B，为说明入口地址，将最上面的16字节从此处去除掉，所以此处终止地址为0xFFFEF&lt;br&gt;64KB - 16B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="-430" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-16" value="BIOS入口地址，此地址也属于BIOS代码，同样属于顶部的640KB字节。只是为了强调其入口地址才单独贴出来，此处16字节的内容是 jmp f000：e05b" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="200" y="-520" width="320" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-18" value="0x500" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="135" y="440" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-19" value="0x4FF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="135" y="465" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-20" value="0x7C00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="85" y="350" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-21" value="0x7BFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="85" y="375" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-22" value="0x9FC00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="180" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-23" value="0x9FBFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="205" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-24" value="0xA0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="90" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-25" value="0x9FFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="115" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-26" value="0xB0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-10" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-27" value="0xAFFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="15" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-28" value="0xB8000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-100" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-29" value="0xB7FFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-75" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-30" value="0xC0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-190" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-31" value="0xBFFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-165" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-36" value="0xF0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-370" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-37" value="0xEFFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-345" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-38" value="0xFFFF0" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-450" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-39" value="0xFFFEF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-425" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-41" value="0xFFFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-515" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-43" value="0xC7FFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-250" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-47" value="0x7E00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="85" y="270" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-48" value="0x7DFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="85" y="295" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-49" value="0xC8000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="-280" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-50" value="&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 15px;&quot;&gt;&lt;b&gt;实模式下1MB内存布局&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="270" y="-572" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-55" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="540" y="-450" width="20" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-56" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;开机第一站地址：CPU&lt;span style=&quot;border-color: var(--border-color); text-align: left; font-size: 14px; font-family: 宋体, monospace;&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14px;&quot;&gt;CS&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; font-size: 14px; font-family: 宋体, monospace;&quot;&gt;：&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14px;&quot;&gt;IP&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; font-size: 14px; font-family: 宋体, monospace;&quot;&gt;寄存器被强制初始化为&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp;0xF000:0xFFF0&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; font-size: 14px; font-family: 宋体, monospace;&quot;&gt;，对应内存地址为&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp;0xFFFF0。&lt;br style=&quot;font-size: 14px;&quot;&gt;随后跳转到0xFE05b位置后，开始执行BIOS程序&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="560" y="-455" width="660" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-57" value="jmp f000：e05b 对应地址为&lt;br&gt;f000 &amp;lt; 4 + e05b = 0xfe05b" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;" vertex="1" parent="1">
          <mxGeometry x="550" y="-542" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-59" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="540" y="-395" width="20" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-61" value="这里是BIOS程序，会进行检测内存、显卡等外设信息，当检测通过，并初始化硬件好后，开始在内存0x000 ~ 0x3FF外建立数据结构中断向量表并填写中断例程。&lt;br style=&quot;font-size: 14px;&quot;&gt;BIOS 最后一项工作是校验启动盘中位于 0 盘 0 道 1 扇区的内容，如果此扇区末尾两个字节为0x55和0xaa,BIOS便认为此扇区存在可执行程序，便加载到地址0x7c00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="560" y="-400" width="1030" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-64" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="530" y="360" width="20" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-65" value="&lt;font style=&quot;font-size: 14px;&quot; color=&quot;#ff3333&quot;&gt;BIOS完成后跳转到该位置 0x7c00&lt;br&gt;代码中的MBR代码会被nasm编译为 mbr.bin, 然后手动写入到hd60M中 0盘0道1扇区 ，算是写入了硬件。左图是内存中形式&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="560" y="355" width="780" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-66" value="&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 20px;&quot;&gt;1KB = 0x400 32KB = 0x8000&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="80" y="-760" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1wO0rDWPHwuriIPUTUys-67" value="&lt;font color=&quot;#ff3333&quot;&gt;程序执行方向&lt;/font&gt;" style="shape=singleArrow;direction=north;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-230" y="-275" width="150" height="600" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
