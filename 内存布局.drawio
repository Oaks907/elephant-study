<mxfile host="drawio-plugin" modified="2023-09-24T14:16:34.224Z" agent="5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.102 Safari/537.36" etag="OUmccWALBrTgGoKCSevF" version="20.5.3" type="embed"><diagram name="Page-1" id="12NWxGoQr25tVnfTjV8N"><mxGraphModel dx="3204" dy="3205" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="1wO0rDWPHwuriIPUTUys-1" value="Interrupt Vector Tabe (中断向量表)&lt;br&gt;1KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="560" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-2" value="0x000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="135" y="620" width="60" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-3" value="BIOS Data Area（BIOS数据区）&lt;br&gt;256B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="470" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-4" value="0x400" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="135" y="530" width="60" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-5" value="0x3FF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="135" y="555" width="60" height="30" as="geometry"/></mxCell><mxCell id="24" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;dashed=1;fontColor=#FF0000;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-6" target="23" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-6" value="可用区域&lt;br&gt;30648B 约30KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="380" width="320" height="90" as="geometry"/></mxCell><mxCell id="32" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;fontColor=#FF0000;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-7" target="29" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-7" value="MBR被BIOS加载到此处&lt;br&gt;512B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="290" width="320" height="90" as="geometry"/></mxCell><mxCell id="173" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;fontColor=#FF0000;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-8" target="171" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-8" value="可用区域&lt;br&gt;622080B约608KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="200" width="320" height="90" as="geometry"/></mxCell><mxCell id="172" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;fontColor=#FF0000;dashed=1;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-9" target="147" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-9" value="EBDA（Extend BIOS Data Area）扩展BIOS数据区&lt;br&gt;1KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="110" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-10" value="用于彩色显示适配器&lt;br&gt;64KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="20" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-11" value="用于黑白显示适配器&lt;br&gt;32KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-70" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-12" value="用于文本模式显示适配器&lt;br&gt;32KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-160" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-13" value="显示适配器BIOS&lt;br&gt;32KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-250" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-14" value="映射硬件适配器的ROM或内存映射式I/O&lt;br&gt;160KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-340" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-15" value="系统BIOS范围是F0000~FFFFF共64B，为说明入口地址，将最上面的16字节从此处去除掉，所以此处终止地址为0xFFFEF&lt;br&gt;64KB - 16B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-430" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-16" value="BIOS入口地址，此地址也属于BIOS代码，同样属于顶部的640KB字节。只是为了强调其入口地址才单独贴出来，此处16字节的内容是 jmp f000：e05b" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-520" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-18" value="0x500" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="135" y="440" width="60" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-19" value="0x4FF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="135" y="465" width="60" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-20" value="0x7C00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="85" y="350" width="70" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-21" value="0x7BFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="85" y="375" width="70" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-22" value="0x9FC00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="180" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-23" value="0x9FBFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="205" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-24" value="0xA0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="90" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-25" value="0x9FFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="115" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-26" value="0xB0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-10" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-27" value="0xAFFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="15" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-28" value="0xB8000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-100" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-29" value="0xB7FFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-75" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-30" value="0xC0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-190" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-31" value="0xBFFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-165" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-36" value="0xF0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-370" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-37" value="0xEFFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-345" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-38" value="0xFFFF0" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-450" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-39" value="0xFFFEF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-425" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-41" value="0xFFFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-515" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-43" value="0xC7FFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-250" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-47" value="0x7E00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="85" y="270" width="70" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-48" value="0x7DFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="85" y="295" width="70" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-49" value="0xC8000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-280" width="80" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-50" value="&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 15px;&quot;&gt;&lt;b&gt;实模式下1MB内存布局&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="30" y="-490" width="180" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-55" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" parent="1" vertex="1"><mxGeometry x="540" y="-450" width="20" height="40" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-56" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;开机第一站地址：CPU&lt;span style=&quot;border-color: var(--border-color); text-align: left; font-size: 14px; font-family: 宋体, monospace;&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14px;&quot;&gt;CS&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; font-size: 14px; font-family: 宋体, monospace;&quot;&gt;：&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14px;&quot;&gt;IP&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; font-size: 14px; font-family: 宋体, monospace;&quot;&gt;寄存器被强制初始化为&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp;0xF000:0xFFF0&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; font-size: 14px; font-family: 宋体, monospace;&quot;&gt;，对应内存地址为&lt;/span&gt;&lt;span style=&quot;border-color: var(--border-color); text-align: left; background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp;0xFFFF0。&lt;br style=&quot;font-size: 14px;&quot;&gt;随后跳转到0xFE05b位置后，开始执行BIOS程序&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;fontSize=14;" parent="1" vertex="1"><mxGeometry x="560" y="-455" width="660" height="50" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-57" value="jmp f000：e05b 对应地址为&lt;br&gt;f000 &amp;lt; 4 + e05b = 0xfe05b" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;" parent="1" vertex="1"><mxGeometry x="550" y="-542" width="330" height="60" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-59" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" parent="1" vertex="1"><mxGeometry x="540" y="-395" width="20" height="40" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-61" value="这里是BIOS程序，会进行检测内存、显卡等外设信息，当检测通过，并初始化硬件好后，开始在内存0x000 ~ 0x3FF外建立数据结构中断向量表并填写中断例程。&lt;br style=&quot;font-size: 14px;&quot;&gt;BIOS 最后一项工作是校验启动盘中位于 0 盘 0 道 1 扇区的内容，如果此扇区末尾两个字节为0x55和0xaa,BIOS便认为此扇区存在可执行程序，便加载到地址0x7c00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;fontSize=14;" parent="1" vertex="1"><mxGeometry x="560" y="-400" width="1030" height="50" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-65" value="&lt;font style=&quot;font-size: 14px;&quot; color=&quot;#ff3333&quot;&gt;BIOS完成后跳转到该位置 0x7c00&lt;br&gt;代码中的MBR代码会被nasm编译为 mbr.bin, 然后手动写入到hd60M中 0盘0道1扇区 ，算是写入了硬件。左图是内存中形式&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="560" y="355" width="780" height="50" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-66" value="&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 20px;&quot;&gt;1KB = 0x400 &lt;br&gt;4KB = 0x1000&lt;br&gt;32KB = 0x800&lt;br&gt;1MB= 0x10,0000&lt;br&gt;1GB=0x4000,0000&lt;br&gt;一个英文字符 = 2 字节&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="-270" y="-570" width="220" height="160" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-67" value="&lt;font color=&quot;#ff3333&quot;&gt;上面是高地址&lt;/font&gt;" style="shape=singleArrow;direction=north;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-230" y="-275" width="150" height="600" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-69" value="GDT[0]：0x00000000:0x00000000&lt;br&gt;8字节空描述符8B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1447.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-70" value="0x900" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="777" y="1462.5" width="60" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-71" value="&lt;font color=&quot;#ff3333&quot;&gt;内核区域 对应 loader.S&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1225" y="1482.5" width="170" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-73" value="loader_stack&lt;br&gt;1KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1492.5" width="320" height="90" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-74" value="loader内核栈顶" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;" parent="1" vertex="1"><mxGeometry x="640" y="1477.5" width="100" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-75" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-74" target="1wO0rDWPHwuriIPUTUys-73" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="705" y="1592.5" as="sourcePoint"/><mxPoint x="755" y="1542.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-78" value="0x500" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="780" y="1560" width="60" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-80" value="GDT[1]:DESC_CODE_HIGH4:0x0000FFFF&lt;br&gt;内核代码段8B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1402.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-81" value="GDT[2]:DESC_DATA_HIGH4:0x0000FFFF&lt;br&gt;数据段8B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1357.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-82" value="GDT[3]:VIDEO_VIDEO_HIGH4:0x0000FFFF&lt;br&gt;显示数据段8B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1312.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-83" value="" style="shape=crossbar;whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1"><mxGeometry x="200" y="695" width="320" height="20" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-84" value="&lt;font color=&quot;#ff3333&quot;&gt;32位，4字节， 2字&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="295" y="677.5" width="130" height="30" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-86" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;strokeColor=default;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-82" target="1wO0rDWPHwuriIPUTUys-82" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-87" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-81" target="1wO0rDWPHwuriIPUTUys-81" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-88" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;dashed=1;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-81" target="1wO0rDWPHwuriIPUTUys-81" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1165" y="1380.5"/></Array></mxGeometry></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-89" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-80" target="1wO0rDWPHwuriIPUTUys-80" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-90" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-69" target="1wO0rDWPHwuriIPUTUys-69" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-91" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-69" target="1wO0rDWPHwuriIPUTUys-69" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-92" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;dashed=1;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-69" target="1wO0rDWPHwuriIPUTUys-69" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-93" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" parent="1" vertex="1"><mxGeometry x="810" y="1272.5" width="20" height="220" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-94" value="&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(255, 51, 51); background-color: initial;&quot;&gt;段描述符，每个占用64B&lt;/span&gt;&lt;/div&gt;&lt;font color=&quot;#ff3333&quot;&gt;&lt;div&gt;&amp;lt;bochs:32&amp;gt; info gdt&lt;/div&gt;&lt;div&gt;&lt;div&gt;Global Descriptor Table (base=0x00000000c0000900, limit=31):&lt;/div&gt;&lt;div&gt;GDT[0x00]=??? descriptor hi=0x00000000, lo=0x00000000&lt;/div&gt;&lt;div&gt;GDT[0x01]=Code segment, base=0x00000000, limit=0xffffffff, Execute-Only, Non-Conforming, Accessed, 32-bit&lt;/div&gt;&lt;div&gt;GDT[0x02]=Data segment, base=0x00000000, limit=0xffffffff, Read/Write, Accessed&lt;/div&gt;&lt;div&gt;GDT[0x03]=Data segment, base=0xc00b8000, limit=0x00007fff, Read/Write, Accessed&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="185" y="1315" width="610" height="130" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-96" value="GDT[4]-GDT[64]&lt;br&gt;预留总共60个描述符" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1267.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="4" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-69" target="1wO0rDWPHwuriIPUTUys-69" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="5" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;endArrow=none;endFill=0;dashed=1;" parent="1" source="1wO0rDWPHwuriIPUTUys-69" target="1wO0rDWPHwuriIPUTUys-69" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6" value="GDT Limit 0x001f&lt;br&gt;2B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1177.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="7" value="GDT SIZE 0x00000000&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1132.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="8" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="720" y="1225" as="sourcePoint"/><mxPoint x="852.0000000000005" y="1225" as="targetPoint"/></mxGeometry></mxCell><mxCell id="9" value="gdt_ptr" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="660" y="1210" width="60" height="30" as="geometry"/></mxCell><mxCell id="10" value="&lt;font color=&quot;#00cc00&quot;&gt;total_mem_bytes 存储内存容量&lt;br&gt;4B&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1222.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="26" value="&lt;div&gt;loader.S不会超过2000字节，既不会超过&lt;/div&gt;&lt;div&gt;0x0900 + 2000 = 0x10D0&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="1440" y="1225" width="240" height="40" as="geometry"/></mxCell><mxCell id="27" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="1410" y="1000" width="20" height="490" as="geometry"/></mxCell><mxCell id="29" value="mbr.S执行体" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="847" y="230" width="320" height="90" as="geometry"/></mxCell><mxCell id="30" value="0x7C00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="767" y="295" width="70" height="30" as="geometry"/></mxCell><mxCell id="31" value="0填充，凑够510B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="847" y="185" width="320" height="45" as="geometry"/></mxCell><mxCell id="33" value="魔数&amp;nbsp;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;0x55,0xaa&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="847" y="140" width="320" height="45" as="geometry"/></mxCell><mxCell id="35" value="0x7DFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="765" y="140" width="70" height="30" as="geometry"/></mxCell><mxCell id="36" value="" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;dashed=1;fontColor=#FF0000;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-8" target="33" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="520" y="290" as="sourcePoint"/><mxPoint x="847" y="140" as="targetPoint"/></mxGeometry></mxCell><mxCell id="38" value="ards_buf times 244 db 0&lt;br&gt;244B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1087.5" width="320" height="45" as="geometry"/></mxCell><mxCell id="39" value="&amp;nbsp;ards_nr dw 0&lt;br&gt;2B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="1043" width="320" height="45" as="geometry"/></mxCell><mxCell id="41" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="640" y="998" width="532" height="62" as="geometry"/></mxCell><mxCell id="21" value="loader.S 执行体" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="41" vertex="1"><mxGeometry x="212" width="320" height="45" as="geometry"/></mxCell><mxCell id="37" value="" style="group" parent="41" vertex="1" connectable="0"><mxGeometry y="32" width="207.00000000000045" height="30" as="geometry"/></mxCell><mxCell id="11" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="37" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="75" y="15" as="sourcePoint"/><mxPoint x="207.00000000000045" y="15" as="targetPoint"/></mxGeometry></mxCell><mxCell id="12" value="loader_start" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="37" vertex="1"><mxGeometry width="90" height="30" as="geometry"/></mxCell><mxCell id="130" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="41" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="80" y="-46" as="sourcePoint"/><mxPoint x="212" y="-46" as="targetPoint"/></mxGeometry></mxCell><mxCell id="131" value="main" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="41" vertex="1"><mxGeometry x="25" y="-61" width="50" height="30" as="geometry"/></mxCell><mxCell id="42" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="760" y="832.5" width="412" height="77.5" as="geometry"/></mxCell><mxCell id="23" value="剩余可用空间" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="42" vertex="1"><mxGeometry x="92" width="320" height="77.5" as="geometry"/></mxCell><mxCell id="28" value="0x00007bff" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="42" vertex="1"><mxGeometry width="90" height="30" as="geometry"/></mxCell><mxCell id="43" value="0xc00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="777" y="1043" width="60" height="30" as="geometry"/></mxCell><mxCell id="44" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="1180" y="1043" width="20" height="217" as="geometry"/></mxCell><mxCell id="45" value="&lt;font color=&quot;#ff0000&quot;&gt;4 + 2 + 4 + 244 + 2 = 256 = 0x100&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="1200" y="1136.5" width="200" height="30" as="geometry"/></mxCell><mxCell id="46" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="1180" y="1265.5" width="20" height="224.5" as="geometry"/></mxCell><mxCell id="1wO0rDWPHwuriIPUTUys-79" value="0x8FF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="780" y="1500" width="60" height="30" as="geometry"/></mxCell><mxCell id="47" value="" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;dashed=1;fontColor=#FF0000;endArrow=none;endFill=0;" parent="1" source="1wO0rDWPHwuriIPUTUys-6" target="1wO0rDWPHwuriIPUTUys-79" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="520" y="470" as="sourcePoint"/><mxPoint x="852" y="1172.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="50" value="8 x 64 =&amp;nbsp; 512 = 0x200" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="1200" y="1362.75" width="140" height="30" as="geometry"/></mxCell><mxCell id="77" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontColor=#FF0000;endArrow=classic;endFill=1;" parent="1" source="51" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="715" y="-640" as="targetPoint"/></mxGeometry></mxCell><mxCell id="109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;dashed=1;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#33FF33;strokeWidth=2;" parent="1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="500" y="-540" as="sourcePoint"/><mxPoint x="500" y="-940" as="targetPoint"/><Array as="points"><mxPoint x="870" y="-540"/><mxPoint x="870" y="-940"/></Array></mxGeometry></mxCell><mxCell id="114" value="指向第一个页表的起始位置" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#FF0000;" parent="109" vertex="1" connectable="0"><mxGeometry x="0.0263" y="3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="51" value="第0个页目录表PDE&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1"><mxGeometry x="200" y="-560" width="320" height="40" as="geometry"/></mxCell><mxCell id="52" value="0x10 0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="75" y="-550" width="90" height="30" as="geometry"/></mxCell><mxCell id="111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;dashed=1;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#33FF33;strokeWidth=2;" parent="1" source="53" target="92" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="940" y="-580"/><mxPoint x="940" y="-1320"/></Array></mxGeometry></mxCell><mxCell id="53" value="PDE 1&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-600" width="320" height="40" as="geometry"/></mxCell><mxCell id="54" value="PDE 2&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-640" width="320" height="40" as="geometry"/></mxCell><mxCell id="55" value="PDE 3&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-680" width="320" height="40" as="geometry"/></mxCell><mxCell id="57" value="PDE4 ~ PDE 767" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-770" width="320" height="90" as="geometry"/></mxCell><mxCell id="60" value="0x10 1000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="75" y="-960" width="90" height="30" as="geometry"/></mxCell><mxCell id="76" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontColor=#FF0000;entryX=0.513;entryY=0.025;entryDx=0;entryDy=0;entryPerimeter=0;endArrow=classic;endFill=1;" parent="1" source="61" target="75" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;dashed=1;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#33FF33;strokeWidth=2;" parent="1" source="61" target="81" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="640" y="-790"/><mxPoint x="640" y="-940"/></Array></mxGeometry></mxCell><mxCell id="61" value="PDE 768&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1"><mxGeometry x="200" y="-810" width="320" height="40" as="geometry"/></mxCell><mxCell id="62" value="PDE 769 ~ PDE 1022" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-900" width="320" height="90" as="geometry"/></mxCell><mxCell id="112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;dashed=1;strokeColor=#b85450;strokeWidth=2;fontColor=#FF0000;endArrow=classic;endFill=1;fillColor=#f8cecc;" parent="1" source="63" target="51" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="750" y="-920"/><mxPoint x="750" y="-520"/></Array></mxGeometry></mxCell><mxCell id="113" value="页目录最后一项指向&lt;br&gt;页目录表的起始位置&lt;br&gt;目的是为了动态操作页表" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#FF0000;" parent="112" vertex="1" connectable="0"><mxGeometry x="-0.24" y="-1" relative="1" as="geometry"><mxPoint x="1" y="1" as="offset"/></mxGeometry></mxCell><mxCell id="63" value="PDE 1023&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-940" width="320" height="40" as="geometry"/></mxCell><mxCell id="65" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="540" y="-940" width="180" height="420" as="geometry"/></mxCell><mxCell id="58" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontColor=#FF0000;" parent="65" vertex="1"><mxGeometry width="20" height="420" as="geometry"/></mxCell><mxCell id="59" value="4 x 1024 = 4K = 0x1000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="65" vertex="1"><mxGeometry x="30" y="195" width="150" height="30" as="geometry"/></mxCell><mxCell id="66" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="160" y="-770" width="20" height="250" as="geometry"/></mxCell><mxCell id="67" value="用户空间&amp;nbsp; 3G&lt;br&gt;只有第一页初始化" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="35" y="-665" width="120" height="40" as="geometry"/></mxCell><mxCell id="68" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="160" y="-940" width="20" height="170" as="geometry"/></mxCell><mxCell id="69" value="内核空间 1G&lt;br&gt;768 - 1023页目录全部初始化" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="5" y="-875" width="180" height="40" as="geometry"/></mxCell><mxCell id="70" value="0x10 0C00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="75" y="-800" width="90" height="30" as="geometry"/></mxCell><mxCell id="75" value="映射0~4MB物理地址空间，均指向第一个页表，&lt;br&gt;地址：0x00101000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="575" y="-680" width="280" height="40" as="geometry"/></mxCell><mxCell id="78" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="40" y="-940" width="20" height="420" as="geometry"/></mxCell><mxCell id="79" value="一个PTE表示4k空间&lt;br&gt;一个PDE表示1024个PTE&lt;br&gt;一个PDT就够表示4GB空间" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="-125" y="-760" width="170" height="60" as="geometry"/></mxCell><mxCell id="81" value="第0个页表项 PTE 0&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="200" y="-980" width="320" height="40" as="geometry"/></mxCell><mxCell id="82" value="&amp;nbsp;PTE 1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="200" y="-1020" width="320" height="40" as="geometry"/></mxCell><mxCell id="83" value="&amp;nbsp;PTE 2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1060" width="320" height="40" as="geometry"/></mxCell><mxCell id="84" value="&amp;nbsp;PTE 3" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="200" y="-1100" width="320" height="40" as="geometry"/></mxCell><mxCell id="85" value="PTE4 ~ PTE 254" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1190" width="320" height="90" as="geometry"/></mxCell><mxCell id="86" value="&amp;nbsp;PTE 1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1400" width="320" height="40" as="geometry"/></mxCell><mxCell id="87" value="&amp;nbsp;PTE 2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1440" width="320" height="40" as="geometry"/></mxCell><mxCell id="88" value="&amp;nbsp;PTE 3" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1480" width="320" height="40" as="geometry"/></mxCell><mxCell id="89" value="PTE4 ~ PTE 1023" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1570" width="320" height="90" as="geometry"/></mxCell><mxCell id="90" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="160" y="-1320" width="20" height="380" as="geometry"/></mxCell><mxCell id="91" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="160" y="-1570" width="20" height="250" as="geometry"/></mxCell><mxCell id="92" value="PTE 0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1360" width="320" height="40" as="geometry"/></mxCell><mxCell id="93" value="第一个PT 4KB" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="50" y="-1085" width="100" height="30" as="geometry"/></mxCell><mxCell id="94" value="第二个PT 4KB" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="50" y="-1460" width="100" height="30" as="geometry"/></mxCell><mxCell id="95" value="第 3 ~ 1022个PTE" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1770" width="320" height="200" as="geometry"/></mxCell><mxCell id="96" value="&amp;nbsp;PTE 1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1850" width="320" height="40" as="geometry"/></mxCell><mxCell id="97" value="&amp;nbsp;PTE 2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1890" width="320" height="40" as="geometry"/></mxCell><mxCell id="98" value="&amp;nbsp;PTE 3" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1930" width="320" height="40" as="geometry"/></mxCell><mxCell id="99" value="PTE4 ~ PTE 1023" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-2020" width="320" height="90" as="geometry"/></mxCell><mxCell id="100" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="160" y="-2020" width="20" height="250" as="geometry"/></mxCell><mxCell id="101" value="PTE 0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1810" width="320" height="40" as="geometry"/></mxCell><mxCell id="102" value="第1023个PT 4KB" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="40" y="-1910" width="120" height="30" as="geometry"/></mxCell><mxCell id="103" value="0x40 1000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="80" y="-2050" width="90" height="30" as="geometry"/></mxCell><mxCell id="104" value="0x40 0000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="70" y="-1800" width="90" height="30" as="geometry"/></mxCell><mxCell id="106" value="可用空间" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-2270" width="320" height="250" as="geometry"/></mxCell><mxCell id="107" value="0xFFFF FFFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="75" y="-2270" width="110" height="30" as="geometry"/></mxCell><mxCell id="108" value="CR30寄存器记录页表的起始地址&lt;br style=&quot;font-size: 16px;&quot;&gt;存储的就是 0x10 1000&lt;br style=&quot;font-size: 16px;&quot;&gt;页目录表记录的是页表的起始位置&lt;br style=&quot;font-size: 16px;&quot;&gt;页表记录的是物理地址的起始地址&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;div&gt;&amp;lt;bochs:3&amp;gt; info tab&lt;/div&gt;&lt;div&gt;cr3: 0x000000100000&lt;/div&gt;&lt;div&gt;虚拟地址 --》 物理地址&lt;/div&gt;&lt;div&gt;0x00000000-0x000fffff -&amp;gt; 0x000000000000-0x0000000fffff&amp;nbsp; &amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;PDE0映射地址低端1MB。虚拟地址高10位定位到第0项&lt;/span&gt;&lt;/div&gt;&lt;div&gt;0xc0000000-0xc00fffff -&amp;gt; 0x000000000000-0x0000000fffff&amp;nbsp; &amp;nbsp;PDE768映射地址低端1MB。虚拟地址高10为定位第768项&lt;/div&gt;&lt;div&gt;0xffc00000-0xffc00fff -&amp;gt; 0x000000101000-0x000000101fff&amp;nbsp; &amp;nbsp;虚拟地址高10位定位到PDE1023项，PDE1023指向的是PDE起始地址，将PDE0中值当作物理地址了&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;0xfff00000-0xffffefff -&amp;gt; 0x000000101000-0x0000001fffff&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 虚拟地址高10位&lt;span style=&quot;background-color: initial;&quot;&gt;定位到PDE1023项，中10位定位到PDE768项，范围为768 ~1022&amp;nbsp; ，映射1020KB （0x0000 ~ 0xEFFFF）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;0xfffff000-0xffffffff -&amp;gt; 0x000000100000-0x000000100fff&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;虚拟地址高10位定位到PDE1023项，中10位定位到PDE1023项，映射4KB&lt;/div&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;fontSize=16;" parent="1" vertex="1"><mxGeometry x="-1620" y="-960" width="1310" height="260" as="geometry"/></mxCell><mxCell id="116" value="&amp;nbsp;PTE255" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="200" y="-1230" width="320" height="40" as="geometry"/></mxCell><mxCell id="117" value="PTE256 ~ PTE1023" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="200" y="-1320" width="320" height="90" as="geometry"/></mxCell><mxCell id="118" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="540" y="-1230" width="20" height="290" as="geometry"/></mxCell><mxCell id="119" value="0 ~ 255 PDE 表示低端1MB" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="570" y="-1100" width="170" height="30" as="geometry"/></mxCell><mxCell id="121" value="&amp;nbsp;PTE255" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="200" y="-1230" width="320" height="40" as="geometry"/></mxCell><mxCell id="122" value="PTE4 ~ PTE 254" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="200" y="-1190" width="320" height="90" as="geometry"/></mxCell><mxCell id="123" value="&amp;nbsp;PTE 2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="200" y="-1060" width="320" height="40" as="geometry"/></mxCell><mxCell id="124" value="0x10 0FFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="75" y="-940" width="90" height="30" as="geometry"/></mxCell><mxCell id="125" value="Main程序映像" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="910" width="320" height="45" as="geometry"/></mxCell><mxCell id="132" value="0x1500" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="777" y="917.5" width="70" height="30" as="geometry"/></mxCell><mxCell id="133" value="跳过地址" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="953" width="320" height="45" as="geometry"/></mxCell><mxCell id="134" value="Main程序映像" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="852" y="910" width="320" height="45" as="geometry"/></mxCell><mxCell id="136" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="640" y="998" width="532" height="62" as="geometry"/></mxCell><mxCell id="137" value="loader.S 执行体" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="136" vertex="1"><mxGeometry x="212" width="320" height="45" as="geometry"/></mxCell><mxCell id="138" value="" style="group" parent="136" vertex="1" connectable="0"><mxGeometry y="32" width="207.00000000000045" height="30" as="geometry"/></mxCell><mxCell id="139" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="138" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="75" y="15" as="sourcePoint"/><mxPoint x="207.00000000000045" y="15" as="targetPoint"/></mxGeometry></mxCell><mxCell id="140" value="loader_start" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="138" vertex="1"><mxGeometry width="90" height="30" as="geometry"/></mxCell><mxCell id="141" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="136" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="80" y="-46" as="sourcePoint"/><mxPoint x="212" y="-46" as="targetPoint"/></mxGeometry></mxCell><mxCell id="142" value="main" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" parent="136" vertex="1"><mxGeometry x="25" y="-61" width="50" height="30" as="geometry"/></mxCell><mxCell id="143" value="0x10d0" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="777" y="970" width="70" height="30" as="geometry"/></mxCell><mxCell id="144" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="750" y="1490" as="sourcePoint"/><mxPoint x="750" y="1590" as="targetPoint"/><Array as="points"><mxPoint x="750" y="1520"/></Array></mxGeometry></mxCell><mxCell id="145" value="内核栈扩展方向" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#FF0000;" parent="144" vertex="1" connectable="0"><mxGeometry x="0.0267" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="146" value="0x800" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="777" y="1237.5" width="60" height="30" as="geometry"/></mxCell><mxCell id="147" value="未使用跳过空间&lt;br&gt;3KB" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1360" y="-320" width="320" height="45" as="geometry"/></mxCell><mxCell id="148" value="主线程PCB&lt;br&gt;4K" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1360" y="-275" width="320" height="45" as="geometry"/></mxCell><mxCell id="149" value="0x9FC00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1270" y="-345" width="80" height="30" as="geometry"/></mxCell><mxCell id="150" value="0x9FBFF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1270" y="-320" width="80" height="30" as="geometry"/></mxCell><mxCell id="152" value="0x9F000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1270" y="-300" width="80" height="30" as="geometry"/></mxCell><mxCell id="153" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" target="148" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1260" y="-275" as="sourcePoint"/><mxPoint x="1290" y="-290" as="targetPoint"/></mxGeometry></mxCell><mxCell id="154" value="主线程Main PCB栈顶" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="1130" y="-290" width="140" height="30" as="geometry"/></mxCell><mxCell id="156" value="主线程Main PCB地址" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="1120" y="-250" width="140" height="30" as="geometry"/></mxCell><mxCell id="157" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1260" y="-230" as="sourcePoint"/><mxPoint x="1360" y="-230" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="158" value="0x9E000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1270" y="-260" width="80" height="30" as="geometry"/></mxCell><mxCell id="159" value="位图地址&lt;br&gt;16K" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;verticalAlign=top;" parent="1" vertex="1"><mxGeometry x="1360" y="-230" width="320" height="140" as="geometry"/></mxCell><mxCell id="161" value="位图地址" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#FF0000;" parent="1" vertex="1"><mxGeometry x="1171" y="-105" width="70" height="30" as="geometry"/></mxCell><mxCell id="162" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1260" y="-90" as="sourcePoint"/><mxPoint x="1360" y="-90" as="targetPoint"/><Array as="points"><mxPoint x="1310" y="-90"/></Array></mxGeometry></mxCell><mxCell id="163" value="0x9A000" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1270" y="-115" width="80" height="30" as="geometry"/></mxCell><mxCell id="165" value="内核空间位图" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#FF0000;dashed=1;" parent="1" vertex="1"><mxGeometry x="1360" y="-110" width="320" height="25" as="geometry"/></mxCell><mxCell id="169" value="用户空间位图" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#FF0000;dashed=1;" parent="1" vertex="1"><mxGeometry x="1360" y="-140" width="320" height="30" as="geometry"/></mxCell><mxCell id="170" value="内核空间虚拟地址的位图" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#FF0000;dashed=1;" parent="1" vertex="1"><mxGeometry x="1360" y="-165" width="320" height="25" as="geometry"/></mxCell><mxCell id="171" value="其他空间" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;verticalAlign=middle;align=center;" parent="1" vertex="1"><mxGeometry x="1360" y="-85" width="320" height="140" as="geometry"/></mxCell><mxCell id="174" value="0x7E00" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1280" y="30" width="70" height="30" as="geometry"/></mxCell><mxCell id="175" value="&lt;h1&gt;线程内存布局&lt;/h1&gt;&lt;p&gt;线程的内存布局大多数是变动的，这里只给出结构信息&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1"><mxGeometry x="2181" y="-1309" width="300" height="140" as="geometry"/></mxCell><mxCell id="176" value="stack_magic:&lt;span style=&quot;color: rgb(23, 80, 235); background-color: rgb(255, 255, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;0x19870916&lt;/span&gt;&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="2481" y="-1120" width="319" height="40" as="geometry"/></mxCell><mxCell id="177" value="PCB结构" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;fontSize=15;" vertex="1" parent="1"><mxGeometry x="2600.5" y="-1169" width="80" height="30" as="geometry"/></mxCell><mxCell id="178" value="pgdir 进程自己页表的虚拟起始地址&amp;nbsp;&lt;br&gt;4B" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-1080" width="319" height="40" as="geometry"/></mxCell><mxCell id="179" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;struct &lt;/span&gt;list_elem all_list_tag&lt;/div&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;当前线程在所有任务队列中的节点&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-1040" width="319" height="40" as="geometry"/></mxCell><mxCell id="180" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;struct &lt;/span&gt;list_elem general_tag&lt;/div&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;当前线程在一般队列中的节点&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-1000" width="319" height="40" as="geometry"/></mxCell><mxCell id="181" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;uint32_t elapsed_ticks&lt;/div&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;该任务占用CPU的嘀嗒数&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-960" width="319" height="40" as="geometry"/></mxCell><mxCell id="182" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;uint8_t ticks&lt;/div&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;该任务每次调度需要的嘀嗒数&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-920" width="319" height="40" as="geometry"/></mxCell><mxCell id="183" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;uint8_t priority&lt;/div&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;优先级&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-880" width="319" height="40" as="geometry"/></mxCell><mxCell id="184" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;char &lt;/span&gt;name[&lt;span style=&quot;color:#1750eb;&quot;&gt;16&lt;/span&gt;]&lt;/div&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;线程名称&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-840" width="319" height="40" as="geometry"/></mxCell><mxCell id="185" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;task_status status&lt;/div&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;线程状态&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-800" width="319" height="40" as="geometry"/></mxCell><mxCell id="196" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontSize=15;fontColor=#FF0000;endArrow=none;endFill=0;dashed=1;" edge="1" parent="1" source="187" target="188"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="199" value="由此定位到线程栈地址" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;fontColor=#FF0000;" vertex="1" connectable="0" parent="196"><mxGeometry x="-0.1657" y="2" relative="1" as="geometry"><mxPoint x="-5" y="12" as="offset"/></mxGeometry></mxCell><mxCell id="187" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;uint32_t* self_kstack&lt;/div&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;font-size: 9.8pt;&quot;&gt;线程自己的内核栈起始地址&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="2481" y="-760" width="319" height="40" as="geometry"/></mxCell><mxCell id="188" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;uint32_t ebp&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="3000" y="-590" width="319" height="40" as="geometry"/></mxCell><mxCell id="189" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;uint32_t ebx&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="3000" y="-630" width="319" height="40" as="geometry"/></mxCell><mxCell id="190" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;uint32_t edi&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="3000" y="-670" width="319" height="40" as="geometry"/></mxCell><mxCell id="191" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;uint32_t esi&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="3000" y="-710" width="319" height="40" as="geometry"/></mxCell><mxCell id="192" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;void &lt;/span&gt;(*eip) (thread_func* func, &lt;span style=&quot;color:#0033b3;&quot;&gt;void&lt;/span&gt;* func_arg) 指向switch_to返回地址&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="3000" y="-745" width="319" height="40" as="geometry"/></mxCell><mxCell id="193" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;void &lt;/span&gt;(*unused_retaddr);&lt;/div&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;占位&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="3000" y="-785" width="319" height="40" as="geometry"/></mxCell><mxCell id="194" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;thread_func* function&lt;/div&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;调用函数名&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="3000" y="-825" width="319" height="40" as="geometry"/></mxCell><mxCell id="195" value="&lt;div style=&quot;background-color: rgb(255, 255, 255); color: rgb(8, 8, 8); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;void&lt;/span&gt;* func_arg&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;font-size: 9.8pt;&quot;&gt;调用function所需要的参数&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="3000" y="-865" width="319" height="40" as="geometry"/></mxCell><mxCell id="201" value="高地址" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;fontSize=15;" vertex="1" parent="1"><mxGeometry x="2335" y="-1120" width="70" height="30" as="geometry"/></mxCell><mxCell id="202" value="低地址" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;fontSize=15;" vertex="1" parent="1"><mxGeometry x="2335" y="-750" width="70" height="30" as="geometry"/></mxCell><mxCell id="203" value="线程栈，用于存储线程中待执行的函数，&lt;br&gt;用于线程切换时，保存环境" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=15;fontColor=#FF0000;" vertex="1" parent="1"><mxGeometry x="3014.5" y="-925" width="290" height="50" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>